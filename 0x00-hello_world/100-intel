#!/bin/bash

# Check if $CFILE is set
if [ -z "$CFILE" ]; then
  echo "Error: The variable \$CFILE is not set."
  exit 1
fi

# Generate the output filename with a .s extension
ASMFILE="${CFILE%.c}.s"

# Use GCC to generate assembly code in Intel syntax and save it to the output file
gcc -S -masm=intel "$CFILE" -o "$ASMFILE"

# Check if GCC encountered any errors
if [ $? -eq 0 ]; then
  echo "Assembly code generated and saved in $ASMFILE"
else
  echo "Error: GCC encountered an error while generating assembly code."
  exit 1
fi

